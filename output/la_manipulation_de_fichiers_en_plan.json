{
  "introduction": "La manipulation de fichiers est une compétence essentielle en Python. Ce guide détaille comment lire, écrire et gérer les fichiers, en mettant l'accent sur les fonctionnalités et les bibliothèques Python natives.",
  "sections": [
    {
      "title": "Ouverture et fermeture de fichiers en Python",
      "subsections": [
        {
          "title": "La fonction `open()`",
          "description": "La fonction `open()` est utilisée pour ouvrir un fichier en Python. Elle prend deux arguments principaux : le nom du fichier et le mode d'ouverture (lecture, écriture, ajout, etc.). Exemple : `file = open('mon_fichier.txt', 'r')`."
        },
        {
          "title": "Les modes d'ouverture ('r', 'w', 'a', 'x', 'b', 't', '+')",
          "description": "Python offre plusieurs modes d'ouverture pour les fichiers : 'r' (lecture), 'w' (écriture), 'a' (ajout), 'x' (création), 'b' (binaire), 't' (texte, par défaut), et '+' (mise à jour). Comprendre ces modes est crucial pour manipuler les fichiers correctement."
        },
        {
          "title": "La méthode `close()`",
          "description": "Il est essentiel de fermer un fichier après utilisation avec la méthode `close()`. Cela libère les ressources système et garantit que les modifications sont bien écrites sur le disque. Exemple : `file.close()`."
        }
      ]
    },
    {
      "title": "Lecture de fichiers en Python",
      "subsections": [
        {
          "title": "Les méthodes `read()`, `readline()`, et `readlines()`",
          "description": "`read()` lit tout le contenu du fichier, `readline()` lit une seule ligne, et `readlines()` lit toutes les lignes et les stocke dans une liste. Exemple : `content = file.read()`."
        },
        {
          "title": "Itération sur les lignes d'un fichier",
          "description": "On peut itérer directement sur un fichier ouvert pour lire chaque ligne, ce qui est efficace pour les grands fichiers. Exemple : `for line in file: print(line)`."
        }
      ]
    },
    {
      "title": "Écriture de fichiers en Python",
      "subsections": [
        {
          "title": "La méthode `write()`",
          "description": "La méthode `write()` écrit une chaîne de caractères dans un fichier. Il est important d'ajouter des sauts de ligne (`\\n`) si nécessaire. Exemple : `file.write('Hello, world!\\n')`."
        },
        {
          "title": "La méthode `writelines()`",
          "description": "La méthode `writelines()` écrit une liste de chaînes de caractères dans un fichier. Chaque chaîne représente une ligne. Exemple : `file.writelines(['Line 1\\n', 'Line 2\\n'])`."
        }
      ]
    },
    {
      "title": "Le mot-clé `with` pour la gestion automatique des fichiers",
      "subsections": [
        {
          "title": "Avantages de l'utilisation de `with`",
          "description": "Le mot-clé `with` garantit que le fichier est automatiquement fermé après son utilisation, même en cas d'exception. Cela simplifie le code et évite les fuites de ressources. Exemple : `with open('mon_fichier.txt', 'r') as file: content = file.read()`."
        },
        {
          "title": "Syntaxe et exemples",
          "description": "La syntaxe de `with` est simple et claire. Elle rend le code plus lisible et plus sûr. Exemple : `with open('mon_fichier.txt', 'w') as file: file.write('Data')`."
        }
      ]
    },
    {
      "title": "Gestion des exceptions lors de la manipulation de fichiers",
      "subsections": [
        {
          "title": "Les exceptions `FileNotFoundError` et `IOError`",
          "description": "Il est crucial de gérer les exceptions qui peuvent survenir lors de la manipulation de fichiers, comme `FileNotFoundError` si le fichier n'existe pas, ou `IOError` en cas d'erreur d'entrée/sortie. Exemple : `try: ... except FileNotFoundError: ...`."
        },
        {
          "title": "Blocs `try...except...finally`",
          "description": "Utiliser des blocs `try...except...finally` permet de gérer les exceptions de manière structurée et de s'assurer que certaines actions (comme la fermeture du fichier) sont toujours exécutées. Exemple : `try: ... except Exception as e: ... finally: file.close()`."
        }
      ]
    },
    {
      "title": "Manipulation des fichiers binaires",
      "subsections": [
        {
          "title": "Lecture et écriture en mode binaire ('rb', 'wb')",
          "description": "Pour manipuler des fichiers binaires, il faut les ouvrir en mode binaire ('rb' pour la lecture, 'wb' pour l'écriture). Exemple : `file = open('image.jpg', 'rb')`."
        },
        {
          "title": "Utilisation des modules `pickle` et `struct`",
          "description": "Les modules `pickle` et `struct` sont utiles pour sérialiser et désérialiser des objets Python en fichiers binaires, ou pour lire et écrire des données binaires structurées. Exemple : `import pickle; pickle.dump(data, file)`."
        }
      ]
    },
    {
      "title": "Cas d'utilisation pratiques",
      "subsections": [
        {
          "title": "Lecture et analyse de fichiers CSV",
          "description": "Exemple de lecture d'un fichier CSV avec le module `csv` de Python, pour extraire et analyser les données."
        },
        {
          "title": "Écriture de logs dans un fichier",
          "description": "Exemple d'écriture de messages de log dans un fichier, utile pour le débogage et le suivi d'applications."
        },
        {
          "title": "Traitement de fichiers de configuration",
          "description": "Exemple de lecture et d'écriture de fichiers de configuration au format INI ou JSON, pour personnaliser le comportement d'une application."
        }
      ]
    },
    {
      "title": "Exercices avec corrigés",
      "subsections": [
        {
          "title": "Exercice 1: Compter les mots dans un fichier",
          "description": "Écrivez un script Python qui ouvre un fichier texte et compte le nombre de mots qu'il contient.",
          "solution": "```python\ndef count_words(filepath):\n with open(filepath, 'r') as file:\n content = file.read()\n words = content.split()\n return len(words)\n\nprint(count_words('mon_fichier.txt'))\n```"
        },
        {
          "title": "Exercice 2: Extraire les adresses email d'un fichier",
          "description": "Écrivez un script Python qui ouvre un fichier texte et extrait toutes les adresses email qu'il contient en utilisant les expressions régulières.",
          "solution": "```python\nimport re\n\ndef extract_emails(filepath):\n with open(filepath, 'r') as file:\n content = file.read()\n emails = re.findall(r'[\\w\\.-]+@[\\w\\.-]+', content)\n return emails\n\nprint(extract_emails('mon_fichier.txt'))\n```"
        },
        {
          "title": "Exercice 3: Copier un fichier en mode binaire",
          "description": "Écrivez un script Python qui copie un fichier d'entrée en un fichier de sortie en mode binaire.",
          "solution": "```python\ndef copy_binary_file(source, destination):\n with open(source, 'rb') as source_file:\n with open(destination, 'wb') as dest_file:\n dest_file.write(source_file.read())\n\ncopy_binary_file('source.bin', 'destination.bin')\n```"
        }
      ]
    },
    {
      "title": "Résumé et comparaisons",
      "subsections": [
        {
          "title": "Résumé des méthodes de lecture et d'écriture",
          "description": "Un résumé des différentes méthodes de lecture (`read()`, `readline()`, `readlines()`) et d'écriture (`write()`, `writelines()`) avec leurs avantages et inconvénients."
        },
        {
          "title": "Comparaison des modes d'ouverture de fichiers",
          "description": "Une comparaison détaillée des différents modes d'ouverture de fichiers ('r', 'w', 'a', 'x', 'b', 't', '+') et de leurs implications."
        },
        {
          "title": "Meilleures pratiques pour la manipulation de fichiers en Python",
          "description": "Conseils et recommandations pour écrire du code propre, efficace et robuste lors de la manipulation de fichiers en Python."
        }
      ]
    }
  ],
  "conclusion": "La manipulation de fichiers est une compétence fondamentale en Python. En comprenant les fonctions `open()`, `read()`, `write()`, le mot-clé `with`, et la gestion des exceptions, vous serez en mesure de gérer efficacement les données et les ressources dans vos applications Python."
}